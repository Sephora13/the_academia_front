<app-sidebar></app-sidebar>

<div *ngIf="loading" class="loader-container">
  <div class="spinner">
    <div class="double-bounce1"></div>
    <div class="double-bounce2"></div>
  </div>
  <p>‚è≥ Chargement des compositions en cours...</p>
</div>
<main class="main container" id="main" *ngIf="!loading">
  <div class="container">
    <h1 class="composition"><strong>üìö Nouvelles Compositions</strong></h1>

    <div *ngFor="let compo of compositions" class="composition-card">
      <div class="infos">
        <h3>{{ compo.titre }}</h3>
        <p>Date pr√©vue : {{ compo.date | date:'dd/MM/yyyy √† HH:mm' }}</p>
        <p *ngIf="compo.status === 'active' && compo.canStart" class="active-status">
          ‚úÖ Disponible maintenant
        </p>
        <p *ngIf="compo.status === 'active' && !compo.canStart" class="inactive-status">
          ‚è≥ Composition d√©sactiv√©e
        </p>
        <p *ngIf="compo.status === 'future'" class="future-status">
          ‚åõ Disponible √† partir de {{ compo.date | date:'dd/MM/yyyy √† HH:mm' }}
        </p>
      </div>
      <button 
        (click)="lancerComposition(compo.id)" 
        [disabled]="!compo.canStart"
        [class.disabled]="!compo.canStart">
        D√©marrer
      </button>
    </div>

    <div *ngIf="compositions.length === 0" class="no-composition">
      Aucune composition pr√©vue pour le moment.
    </div>
  </div>
</main>